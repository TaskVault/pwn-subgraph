type LOANClaimed @entity(immutable: true) {
  id: Bytes!
  loan: Loan!
  defaulted: Boolean! # bool
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type LOANCreated @entity(immutable: true) {
  id: Bytes!
  loan: Loan!
  terms_lender: Bytes! # address
  terms_borrower: Bytes! # address
  terms_expiration: BigInt! # uint40
  terms_collateral_category: Int! # uint8
  terms_collateral_assetAddress: Bytes! # address
  terms_collateral_id: BigInt! # uint256
  terms_collateral_amount: BigInt! # uint256
  terms_asset_category: Int! # uint8
  terms_asset_assetAddress: Bytes! # address
  terms_asset_id: BigInt! # uint256
  terms_asset_amount: BigInt! # uint256
  terms_loanRepayAmount: BigInt! # uint256
  factoryDataHash: Bytes! # bytes32
  factoryAddress: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type LOANExpirationDateExtended @entity(immutable: true) {
  id: Bytes!
  loan: Loan! # uint256
  extendedExpirationDate: BigInt! # uint40
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type LOANPaidBack @entity(immutable: true) {
  id: Bytes!
  loan: Loan! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Token @entity {
  " token address "
  id: Bytes!
  " token name "
  name: String!
  " token symbol "
  symbol: String!
  " token decimals "
  decimals: Int!
}

type Asset @entity {
  " asset address "
  id: Bytes!
  " asset category "
  category: AssetCategory!
  " token metadata if ERC20 "
  token: Token
}

enum AssetCategory {
  ERC20
  ERC721
  ERC1155
  CryptoKitties
}

type Loan @entity {
  " loan id "
  id: ID!
  " loan borrower "
  borrower: Bytes!
  " loan lender "
  lender: Bytes!
  " loan expiration "
  expiration: BigInt!
  " loan collateral asset "
  collateral: Asset! 
  " loan collateral asset amount "
  collateralAmount: BigInt
  " loan collateral token id if NFT "
  collateralTokenId: BigInt
  " loan borrow asset "
  borrowAsset: Asset!
  " loan borrow asset amount "
  borrowAmount: BigDecimal!
  " loan repay amount "
  repayAmount: BigDecimal!
}
